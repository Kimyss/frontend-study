<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    // var, let, const의 차이

    // 1. varwatchPosition();
    // 함수 스코프에 종속, 그 외엔 전역
    // 블록 기준으로 스코프가 생기지 않기 때문에 블록 밖에서 접근 가능
    // 예): for문 내에서 var로 선언하면 for문 밖에서도 사용 가능
    for(let i = 0; i < 10; i++){
      var leak = '내 이름은 var, 반복문 밖에서도 사용가능하지';     //전역변수
    }
    console.log(leak);  //반복문 밖에 있지만 사용됨. 블록스코프 벗어나도 접근가능

    function myFunc() {
      var functionScoped = '내 이름은 var, 함수 안에서만 사용가능하지';   //지역변수
      console.log(functionScoped);
    }
    myFunc();
    // console.log(functionScoped);    //함수를 벗어나면 접근불가

    // 2.let
    // 블록 스코프에 종속, 그 외엔 전역
    // 변수가 선언된 블록과 그 하위 블록 내에서만 사용가능
    // let 사용예
    let x = 'global';
    if(x === 'global'){
      let x ='block-scopde';
      
      console.log(x);   //지역변수
    }
    console.log(x);     //전역변수

    // var 사용예
    var y = 'global';
    if(y === 'global'){
      var y ='block-scopde';
      
      console.log(y);   //전역변수 
    }
    console.log(y);     //전역변수

    // 3. const
    // 블록 스코프에 종속, 그 외엔 전역
    // 값이 변경될 수 없다.
    const constant = 'I am constant';   // 전역변수
    // constant ='reassigned';   //값의 재할당 불가

    // const에 객체가 담겼다면..?
    const person = {
      name: 'goni',
      age: 24
    };

    person.age = 26;
    console.log(person.age);
    // person => 객체내의 주소값 참조
    // 변수 전체를 재할당하는 것이 아니라 그 속성 중 하나만 재할당하는 것이라 문제없음
    // person 변수에는 객체의 참조값(주소값, 번지)이 들어있음 (=>참조변수)

    // const person = {
    //   name: 'goni',
    //   age: 24
    // };
    // => 에러 ! person 자체를 변경불가 가지고 있는 주소는 하나

    // 4. 선언하기 전 사용할 수 있는 var
    console.log(iam);
    var iam = 'I am a var';   //호이스팅, 선언도 되면서 값도 undefined로 초기화
    // var는 정의되기 전에 접근 가능, 값은 비어있는 상태 (undefined)
    // console.log(jam);
    // let jam = 'i am a let';
    // let, const는 정의되기 전에 접근 불가
    
    // var, let, const 선언 모두 호이스팅의 대상이 됨
    // var와 달리 호이스팅시 undefined로 변수를 초기화 하지는 않음

    // 5. var는 중복선언을 허용
    var user = 'Peter';
    var user = 'John';
    console.log(user);

        // (정리) var와 let, const의 차이점
    // 1) 스코프가 다르다. var로 선언한 변수는 블록 스코프가 아닌 함수 수준 스코프를 갖는다.
    // 2) var는 정의되기 전에 접근할 수 있다.(정의되기 전에는 undefined)
    // 3) var는 중복 선언을 허용한다.(변수명이 동일함으로써 예기치 못한 오류가 발생할 수 있음)


    // Quiz
    // 1.1 다음 코드의 올바른 출력은?
    var greeting = 'Hello';

    greeting = 'Farewell';

    for (var i = 0; i < 2; i++) {
      var greeting = 'Good morning';
    }

    console.log(greeting);  

    // 1) Hello
    // 2) Good morning
    // 3) Farewell

    // 1.2 다음 코드의 올바른 출력은?
    let value = 1;

    if (true) {
      let value = 2;
      console.log(value);
    }
    
    value = 3;    

    // 1) 1
    // 2) 2
    // 3) 3

    // 1.3 다음 코드의 올바른 출력은?
    let a = 100;

    if (a > 50) {
      let a = 10;
    }

    console.log(a); 

    // 1) 10
    // 2) 100
    // 3) 50

    // 1.4 다음 코드의 올바른 출력은?
    console.log(b);

    const b = 1;   

    // 1) undefined
    // 2) ReferenceError
    // 3) 1

    // 2) 2) 2) 2)
  </script>
</body>
</html>